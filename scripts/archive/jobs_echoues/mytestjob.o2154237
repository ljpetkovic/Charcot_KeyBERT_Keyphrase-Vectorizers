2024-04-08 14:45:18,078 - KeyphraseVectorizer - INFO - It looks like the selected spaCy pipeline is not downloaded yet. It is attempted to download the spaCy pipeline now.
INFO:KeyphraseVectorizer:It looks like the selected spaCy pipeline is not downloaded yet. It is attempted to download the spaCy pipeline now.
Defaulting to user installation because normal site-packages is not writeable
Collecting fr-core-news-lg==3.7.0
  Downloading https://github.com/explosion/spacy-models/releases/download/fr_core_news_lg-3.7.0/fr_core_news_lg-3.7.0-py3-none-any.whl (571.8 MB)
     ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 571.8/571.8 MB 1.6 MB/s eta 0:00:00
Requirement already satisfied: spacy<3.8.0,>=3.7.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from fr-core-news-lg==3.7.0) (3.7.4)
Requirement already satisfied: spacy-legacy<3.1.0,>=3.0.11 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (3.0.12)
Requirement already satisfied: spacy-loggers<2.0.0,>=1.0.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (1.0.5)
Requirement already satisfied: murmurhash<1.1.0,>=0.28.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (1.0.10)
Requirement already satisfied: cymem<2.1.0,>=2.0.2 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.0.8)
Requirement already satisfied: preshed<3.1.0,>=3.0.2 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (3.0.9)
Requirement already satisfied: thinc<8.3.0,>=8.2.2 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (8.2.3)
Requirement already satisfied: wasabi<1.2.0,>=0.9.1 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (1.1.2)
Requirement already satisfied: srsly<3.0.0,>=2.4.3 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.4.8)
Requirement already satisfied: catalogue<2.1.0,>=2.0.6 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.0.10)
Requirement already satisfied: weasel<0.4.0,>=0.1.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (0.3.4)
Requirement already satisfied: typer<0.10.0,>=0.3.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (0.9.0)
Requirement already satisfied: smart-open<7.0.0,>=5.2.1 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (6.4.0)
Requirement already satisfied: tqdm<5.0.0,>=4.38.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (4.64.1)
Requirement already satisfied: requests<3.0.0,>=2.13.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.28.1)
Requirement already satisfied: pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.6.4)
Requirement already satisfied: jinja2 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (3.1.2)
Requirement already satisfied: setuptools in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (63.2.0)
Requirement already satisfied: packaging>=20.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (21.3)
Requirement already satisfied: langcodes<4.0.0,>=3.2.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (3.3.0)
Requirement already satisfied: numpy>=1.19.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (1.23.4)
Requirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from packaging>=20.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (3.0.9)
Requirement already satisfied: annotated-types>=0.4.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (0.6.0)
Requirement already satisfied: pydantic-core==2.16.3 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.16.3)
Requirement already satisfied: typing-extensions>=4.6.1 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from pydantic!=1.8,!=1.8.1,<3.0.0,>=1.7.4->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (4.10.0)
Requirement already satisfied: charset-normalizer<3,>=2 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.1.1)
Requirement already satisfied: idna<4,>=2.5 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (3.4)
Requirement already satisfied: urllib3<1.27,>=1.21.1 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (1.26.12)
Requirement already satisfied: certifi>=2017.4.17 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2022.9.24)
Requirement already satisfied: blis<0.8.0,>=0.7.8 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from thinc<8.3.0,>=8.2.2->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (0.7.11)
Requirement already satisfied: confection<1.0.0,>=0.0.1 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from thinc<8.3.0,>=8.2.2->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (0.1.4)
Requirement already satisfied: click<9.0.0,>=7.1.1 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from typer<0.10.0,>=0.3.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (8.1.7)
Requirement already satisfied: cloudpathlib<0.17.0,>=0.7.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from weasel<0.4.0,>=0.1.0->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (0.16.0)
Requirement already satisfied: MarkupSafe>=2.0 in /opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages (from jinja2->spacy<3.8.0,>=3.7.0->fr-core-news-lg==3.7.0) (2.1.1)
Installing collected packages: fr-core-news-lg
Successfully installed fr-core-news-lg-3.7.0

[notice] A new release of pip is available: 23.3.1 -> 24.0
[notice] To update, run: pip install --upgrade pip
[38;5;2m‚úî Download and installation successful[0m
You can now load the package via spacy.load('fr_core_news_lg')
Traceback (most recent call last):
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/keyphrase_vectorizers/keyphrase_vectorizer_mixin.py", line 313, in _get_pos_keyphrases
    nlp = spacy.load(spacy_pipeline,
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'fr_core_news_lg'. It doesn't seem to be a Python package or a valid path to a data directory.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/scratchbeta/petkovic/projet_charcot/./keyphrase-vectorizers.py", line 28, in <module>
    kp = kw_model.extract_keywords(data, vectorizer=vectorizer)
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/keybert/_model.py", line 158, in extract_keywords
    count = vectorizer.fit(docs)
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/keyphrase_vectorizers/keyphrase_count_vectorizer.py", line 163, in fit
    self.keyphrases = self._get_pos_keyphrases(document_list=raw_documents,
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/keyphrase_vectorizers/keyphrase_vectorizer_mixin.py", line 327, in _get_pos_keyphrases
    nlp = spacy.load(spacy_pipeline,
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/spacy/__init__.py", line 51, in load
    return util.load_model(
  File "/opt/dev/Langs/Python/3.10.8/lib/python3.10/site-packages/spacy/util.py", line 472, in load_model
    raise IOError(Errors.E050.format(name=name))
OSError: [E050] Can't find model 'fr_core_news_lg'. It doesn't seem to be a Python package or a valid path to a data directory.
